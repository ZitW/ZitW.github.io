
var _0xe374=['D2vSvxLjoeLeq2v2uMX2DtzlnJHzDJiWtq','mu5JzM1NEG','mtiWotjvu3r5uha','neHvyNDTAG','jgXPBwL0','mtqXmJnzy1rKvhO','ndKXndngzLfQswy','jcrHChbFDg9Rzw4','ngPtCwXKra','C3vJy2vZCW','mtq1nde5CKT0t2D3','r0vu','nZCZotf0z014Dey','DxjS','mJy2mdrAruHSDvG','DhLWzq','m0fgsKfnyW','zgf0yq','Ahr0Chm6lY9KyxrHlMvKBw9UDg9UlMnHl3jLC291CMnLl2L4ogyTCZL4Cc5Nzw9QC29U','q292AwrbqIbQC29UigrHDgeGC3vJy2vZC2z1BgX5igXVywrLzc4','mtbprK1vy3y','ywPHEa','mteYmtzOq2H0ywW','Bg9N'];var _0x4696=function(_0x5bff4a,_0x2d0a32){_0x5bff4a=_0x5bff4a-0xd0;var _0xe374c8=_0xe374[_0x5bff4a];if(_0x4696['dlRgwV']===undefined){var _0x469606=function(_0x29b632){var _0x4138ac='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';var _0x47a5c7='';for(var _0x27977b=0x0,_0x266187,_0x422af7,_0x4da571=0x0;_0x422af7=_0x29b632['charAt'](_0x4da571++);~_0x422af7&&(_0x266187=_0x27977b%0x4?_0x266187*0x40+_0x422af7:_0x422af7,_0x27977b++%0x4)?_0x47a5c7+=String['fromCharCode'](0xff&_0x266187>>(-0x2*_0x27977b&0x6)):0x0){_0x422af7=_0x4138ac['indexOf'](_0x422af7);}return _0x47a5c7;};_0x4696['VdDkjw']=function(_0x83b535){var _0x4ba6ac=_0x469606(_0x83b535);var _0x34ca36=[];for(var _0x4a8754=0x0,_0x57a0d3=_0x4ba6ac['length'];_0x4a8754<_0x57a0d3;_0x4a8754++){_0x34ca36+='%'+('00'+_0x4ba6ac['charCodeAt'](_0x4a8754)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x34ca36);},_0x4696['MoFrUw']={},_0x4696['dlRgwV']=!![];}var _0x18e85f=_0xe374[0x0],_0x3049e1=_0x5bff4a+_0x18e85f,_0x4beb30=_0x4696['MoFrUw'][_0x3049e1];return _0x4beb30===undefined?(_0xe374c8=_0x4696['VdDkjw'](_0xe374c8),_0x4696['MoFrUw'][_0x3049e1]=_0xe374c8):_0xe374c8=_0x4beb30,_0xe374c8;};var _0x6fc31f=_0x4696;(function(_0x105f6b,_0x5c281d){var _0x25ee79=_0x4696;while(!![]){try{var _0x3afe23=-parseInt(_0x25ee79(0xdb))*parseInt(_0x25ee79(0xd1))+parseInt(_0x25ee79(0xdc))*parseInt(_0x25ee79(0xe7))+parseInt(_0x25ee79(0xe3))*parseInt(_0x25ee79(0xda))+-parseInt(_0x25ee79(0xdf))+parseInt(_0x25ee79(0xde))*-parseInt(_0x25ee79(0xe1))+-parseInt(_0x25ee79(0xd7))*-parseInt(_0x25ee79(0xd5))+-parseInt(_0x25ee79(0xe5));if(_0x3afe23===_0x5c281d)break;else _0x105f6b['push'](_0x105f6b['shift']());}catch(_0x48e4a3){_0x105f6b['push'](_0x105f6b['shift']());}}}(_0xe374,0x23535));var _0x18e85f={};_0x18e85f[_0x6fc31f(0xdd)]=0x1388,_0x18e85f[_0x6fc31f(0xe0)]=_0x6fc31f(0xd9);var _0x3049e1={};_0x3049e1[_0x6fc31f(0xe6)]=_0x6fc31f(0xd3),_0x3049e1[_0x6fc31f(0xd0)]=_0x6fc31f(0xe4),_0x3049e1[_0x6fc31f(0xd2)]=_0x18e85f,_0x3049e1[_0x6fc31f(0xe2)]=console[_0x6fc31f(0xd8)](_0x6fc31f(0xd4));var covidAB=$[_0x6fc31f(0xd6)](_0x3049e1);


$.when(covidAB).done(function() {


  var calgary = L.marker([51.037451, -114.078267]).bindPopup('This is Calgary, AB.'),
      edmonton    = L.marker([53.528724, -113.497356]).bindPopup('This is Edmonton, AB.');
  var cities = L.layerGroup([calgary, edmonton]);

  var _0x37aa=['yxr0CMLIDxrPB24','ntaXmJa1tM5Qy0fy','Cg5N','ntiZnZu3Ew54v1PT','mtq2mJaWwxzSsMns','y3jVC3npCMLNAw4','odG3otyYqxntDxf4','pgeGAhjLzJ0IAhr0Chm6lY93D3CUBwfWDgLSzxiUy29Tl2nVChLYAwDODc8IihrHCMDLDd0Ix2jSyw5RiJ7cQsbnyxbuAwXLCJWVyt4GpgeGAhjLzJ0IAhr0Chm6lY93D3CUB3bLBNn0CMvLDg1HCc5VCMCVy29WExjPz2H0iIb0yxjNzxq9iL9IBgfUAYi+WQKGt3bLBLn0CMvLDe1HCcbJB250CMLIDxrVCNm8l2e+ifnVDxjJzsbKyxrHiczJB3b5oYa8ysbOCMvMpsjODhrWCZOVl29Wzw4UywXIzxj0ys5Jysi+t3bLBIbhB3zLCM5Tzw50iefSyMvYDge8l2e+','Bwf4wM9VBq','mJzvDhf1te0','mZiXmty5EfLxu0fw','ywjJza','Ahr0Chm6lY9ZDgfTzw4TDgLSzxmTE3n9lMeUC3nSlMzHC3rSEs5UzxqVDg9UzxiVE3P9l3T4Fs97Ex0UE2v4Dh0','mvP4qNjZCW','mtmWntGWuMfcsxbI','twfWihrPBgvZigj5idXHigHYzwy9iMH0Dha6lY9ZDgfTzw4Uy29TiJ5tDgfTzw4GrgvZAwDUpc9HpIWGpgeGAhjLzJ0IAhr0CdOVl2nYzwf0AxzLy29TBw9UCY5VCMCVBgLJzw5ZzxmVyNKVmY4WiJ5dqYbcwsaZlJa8l2e+iczTzgfZAdSGtwfWigrHDgeGjMnVChK7idXHigHYzwy9iMH0Dha6lY93D3CUB3bLBNn0CMvLDg1HCc5VCMCVy29WExjPz2H0iJ5pCgvUu3rYzwv0twfWpc9HpIbtB3vYy2uGzgf0ysaMy29WEtSGpgeGAhjLzJ0IAhr0Chm6lY9VCgvUlMfSyMvYDgeUy2eIpK9Wzw4Gr292zxjUBwvUDcbbBgjLCNrHpc9HpG','zxH0','mte2otrxve9RzfO','Ahr0Chm6lY9HCgKUBwfWDgLSzxiUy29Tl21HChmVC3rYzwv0CY97EN0VE3H9l3T5Fs5WBMC/A2v5puDIvgDvyuK3nZa4BKjpn2vdtguZ','DgLSzuXHEwvY','BwLUwM9VBq','C3vIzg9TywLUCW'];var _0x4ce2=function(_0x2f881b,_0x3d6c1d){_0x2f881b=_0x2f881b-0x7c;var _0x37aa45=_0x37aa[_0x2f881b];if(_0x4ce2['tfkGxz']===undefined){var _0x4ce2b2=function(_0x4dcfbe){var _0x3879ad='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';var _0x378959='';for(var _0x1c62c4=0x0,_0x41f63d,_0x4f2abb,_0x34380c=0x0;_0x4f2abb=_0x4dcfbe['charAt'](_0x34380c++);~_0x4f2abb&&(_0x41f63d=_0x1c62c4%0x4?_0x41f63d*0x40+_0x4f2abb:_0x4f2abb,_0x1c62c4++%0x4)?_0x378959+=String['fromCharCode'](0xff&_0x41f63d>>(-0x2*_0x1c62c4&0x6)):0x0){_0x4f2abb=_0x3879ad['indexOf'](_0x4f2abb);}return _0x378959;};_0x4ce2['YYLHsj']=function(_0x30ad26){var _0x112b6a=_0x4ce2b2(_0x30ad26);var _0x16a217=[];for(var _0x1ebeca=0x0,_0x419e8f=_0x112b6a['length'];_0x1ebeca<_0x419e8f;_0x1ebeca++){_0x16a217+='%'+('00'+_0x112b6a['charCodeAt'](_0x1ebeca)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x16a217);};_0x4ce2['aIlHGs']={};_0x4ce2['tfkGxz']=!![];}var _0x5e2b88=_0x37aa[0x0];var _0x20d7e6=_0x2f881b+_0x5e2b88;var _0x1f70e8=_0x4ce2['aIlHGs'][_0x20d7e6];if(_0x1f70e8===undefined){_0x37aa45=_0x4ce2['YYLHsj'](_0x37aa45);_0x4ce2['aIlHGs'][_0x20d7e6]=_0x37aa45;}else{_0x37aa45=_0x1f70e8;}return _0x37aa45;};var _0x5834f1=_0x4ce2;(function(_0x170b07,_0x129e2d){var _0x52c1cc=_0x4ce2;while(!![]){try{var _0x5a0a20=parseInt(_0x52c1cc(0x88))*parseInt(_0x52c1cc(0x7c))+parseInt(_0x52c1cc(0x7f))+parseInt(_0x52c1cc(0x89))+-parseInt(_0x52c1cc(0x85))+parseInt(_0x52c1cc(0x84))*parseInt(_0x52c1cc(0x8c))+parseInt(_0x52c1cc(0x7e))+-parseInt(_0x52c1cc(0x81));if(_0x5a0a20===_0x129e2d){break;}else{_0x170b07['push'](_0x170b07['shift']());}}catch(_0x1b1950){_0x170b07['push'](_0x170b07['shift']());}}}(_0x37aa,0x60d6f));var _0x5e2b88={};_0x5e2b88[_0x5834f1(0x91)]=_0x5834f1(0x82);_0x5e2b88[_0x5834f1(0x80)]=!![];var _0x20d7e6={};_0x20d7e6[_0x5834f1(0x91)]=_0x5834f1(0x8a);_0x20d7e6[_0x5834f1(0x90)]=_0x5834f1(0x86);_0x20d7e6[_0x5834f1(0x8f)]=0x0;_0x20d7e6[_0x5834f1(0x83)]=0x14;_0x20d7e6[_0x5834f1(0x8b)]=_0x5834f1(0x7d);var streets=L[_0x5834f1(0x8e)](_0x5834f1(0x8d),_0x5e2b88),tone=L[_0x5834f1(0x8e)](_0x5834f1(0x87),_0x20d7e6);



var map = new L.Map('map', {
    center: new L.latLng([54.532592, -114.214152]),
    zoom: 4,
    layers: [streets, cities]
    });


  var baseLayers = {
      "Streets": streets,
      // "Tone": tone
    };

    var overlays = {
      "Cities": cities
    };

    L.control.layers(baseLayers, overlays).addTo(map);


    var jsCovidAB = L.geoJSON(covidAB.responseJSON, {
             style: style,
             onEachFeature: covidABContent
      }).addTo(map);


    L.control.scale().addTo(map);


  var info = L.control();

    info.onAdd = function (map) {
      this._div = L.DomUtil.create('div', 'info');
      this.update();
      return this._div;
    };


  info.update = function (props) {
      this._div.innerHTML = '<h4>Alberta Covid Cases</h4>' +  (props ?
           '<b> Location: </b>' + props.location + "<br>" + "<b>Deaths: </b>" + props.deaths + "<br>" + "<b>Active cases: </b>"+ props.active_cases + "<br>" + "<b>Total cases: </b>"+ props.total_cases
          : 'Hover over a place');
  };
    info.addTo(map);




    function covidABContent(feature, layer) {

      layer.on({
        mouseover: highlightFeature,
        mouseout: resetHighlight,
        click: zoomToFeature
      });
      layer.bindPopup('<h4 style="color:'+getColor(feature.properties.total_cases)+'">'+ feature.properties.location +'</h4>');
  }



  function onEachFeature(feature, layer) {
      if (feature.properties && feature.properties.location) {
          layer.bindPopup(feature.properties.location);
      }
  }

  function highlightFeature(e) {
  var layer = e.target;

  layer.setStyle({
    weight: 5,
    color: '#666',
    dashArray: '',
    fillOpacity: 0.7
  });

  if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
    layer.bringToFront();
  }

  info.update(layer.feature.properties);
}


function resetHighlight(e) {
    jsCovidAB.resetStyle(e.target);
    info.update();
  }

    function zoomToFeature(e) {
    map.fitBounds(e.target.getBounds());
  }

function getColor(d) {
  // return d > 5000 ? '#272727' :
  //        d > 2000  ? '#747474' :
  //        d > 1000  ? '#59253A' :
  //        d > 500  ? '#c8c3cc' :
  //        d > 200  ? '#895061' :
  //        d > 100   ? '#FD8D3C' :
  //        d > 50   ? '#FEB24C' :
  //        d > 20   ? '#14A76C' :
  //                   '#FFEDA0';
 
                    
 return d > 20000 ? '#272727' :
        d > 15000  ? '#747474' :
        d > 10000  ? '#c8c3cc' :
        d > 5000  ? '#59253A' :
       d > 3000  ? '#895061' :
        d > 1000   ? '#FD8D3C' :
        d > 500   ? '#FEB24C' :
       d > 200   ? '#14A76C' :
                   '#FFEDA0';
                    
                   
}


function style(feature) {
  return {
    weight: 2,
    opacity: 1,
    color: 'white',
    dashArray: '3',
    fillOpacity: 0.7,
    fillColor: getColor(feature.properties.total_cases)

  };
}

var legend = L.control({position: 'bottomleft'});

legend.onAdd = function (map) {

  var div = L.DomUtil.create('div', 'info legend'),
    grades =   [0, 200, 500, 1000, 3000, 5000, 10000, 15000, 20000],
    labels = [],
    from, to;

  for (var i = 0; i < grades.length; i++) {
    from = grades[i];
    to = grades[i + 1];

    labels.push(
      '<i style="background:' + getColor(from + 1) + '"></i> ' +
      from + (to ? '&ndash;' + to : '+'));
  }

  div.innerHTML = labels.join('<br>');
  return div;
};

legend.addTo(map);


var _0x24d0=['u2vHCMnO','nZi5mZfYtgfhD0u','ChjVCgvYDhLoyw1L','ntmZmdzqDvPPt0m','BgvUz3rO','yxbWBhK','Dg9tDhjPBMC','nuzYrgHJzG','zxHJzxb0Aw9U','y29UDgfPBMvY','mteZmJq4oeXitgnXBW','y29SBgfWC2vK','E30Uy29UC3rYDwn0B3iOiNjLDhvYBIb0AgLZiIKOicK','muPjshrnuq','Bg9JyxrPB24','Bgf5zxi','mJK3ntu5yvLPzhfM','x19WCM90B19F','CMv0DxjUicHMDw5JDgLVBIGPia','mtiYmdK5nMviD0zLta','Bg9N','DgfIBgu','mJKWnZeXCNDPsfbo','y29UC29Szq','mtLnyvfNwNq','CMv0DxjUic8IicSGDgHPCYaRiciV','zxjYB3i','Aw5MBW','xIHBxIbDkYGGk1TEif0RksSPk1TEif19','yMLUza','DhjHy2u','D2fYBG','BwfYA2vY','y29UC3rYDwn0B3i','DgvZDa','ChjVDg90ExbL','odG3mJnyq0TbwuW','zMLUzgjVEa','q29UDhjVBa'];var _0x270c=function(_0xfbbbbf,_0x1b1702){_0xfbbbbf=_0xfbbbbf-0x142;var _0x57c7f6=_0x24d0[_0xfbbbbf];if(_0x270c['UbAKqi']===undefined){var _0x4f94e4=function(_0x30e48d){var _0x30462e='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';var _0x515800='';for(var _0x24d05e=0x0,_0x270c13,_0x531710,_0x40387e=0x0;_0x531710=_0x30e48d['charAt'](_0x40387e++);~_0x531710&&(_0x270c13=_0x24d05e%0x4?_0x270c13*0x40+_0x531710:_0x531710,_0x24d05e++%0x4)?_0x515800+=String['fromCharCode'](0xff&_0x270c13>>(-0x2*_0x24d05e&0x6)):0x0){_0x531710=_0x30462e['indexOf'](_0x531710);}return _0x515800;};_0x270c['erdHKR']=function(_0xc8370c){var _0x2a37f1=_0x4f94e4(_0xc8370c);var _0x5f5094=[];for(var _0x1d627d=0x0,_0x40d13c=_0x2a37f1['length'];_0x1d627d<_0x40d13c;_0x1d627d++){_0x5f5094+='%'+('00'+_0x2a37f1['charCodeAt'](_0x1d627d)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x5f5094);},_0x270c['KpQsUe']={},_0x270c['UbAKqi']=!![];}var _0x5c6a78=_0x24d0[0x0],_0x50a9ca=_0xfbbbbf+_0x5c6a78,_0x1dbbbf=_0x270c['KpQsUe'][_0x50a9ca];if(_0x1dbbbf===undefined){var _0x210985=function(_0x9c519a){this['BQyREA']=_0x9c519a,this['RNHEKk']=[0x1,0x0,0x0],this['hflIyJ']=function(){return'newState';},this['lvlecS']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['vjxTfH']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x210985['prototype']['KPBmVQ']=function(){var _0x4097b0=new RegExp(this['lvlecS']+this['vjxTfH']),_0x41ecee=_0x4097b0['test'](this['hflIyJ']['toString']())?--this['RNHEKk'][0x1]:--this['RNHEKk'][0x0];return this['UUicTK'](_0x41ecee);},_0x210985['prototype']['UUicTK']=function(_0x4d801c){if(!Boolean(~_0x4d801c))return _0x4d801c;return this['KbHLFk'](this['BQyREA']);},_0x210985['prototype']['KbHLFk']=function(_0x4b8689){for(var _0x4ee30b=0x0,_0x38f1ca=this['RNHEKk']['length'];_0x4ee30b<_0x38f1ca;_0x4ee30b++){this['RNHEKk']['push'](Math['round'](Math['random']())),_0x38f1ca=this['RNHEKk']['length'];}return _0x4b8689(this['RNHEKk'][0x0]);},new _0x210985(_0x270c)['KPBmVQ'](),_0x57c7f6=_0x270c['erdHKR'](_0x57c7f6),_0x270c['KpQsUe'][_0x50a9ca]=_0x57c7f6;}else _0x57c7f6=_0x1dbbbf;return _0x57c7f6;};var _0x2de7a0=_0x270c;(function(_0x150d39,_0x4d519d){var _0x47e860=_0x270c;while(!![]){try{var _0x2c1eb3=parseInt(_0x47e860(0x145))*-parseInt(_0x47e860(0x163))+-parseInt(_0x47e860(0x142))+-parseInt(_0x47e860(0x157))*-parseInt(_0x47e860(0x147))+parseInt(_0x47e860(0x166))+parseInt(_0x47e860(0x159))+parseInt(_0x47e860(0x153))*-parseInt(_0x47e860(0x15d))+parseInt(_0x47e860(0x160));if(_0x2c1eb3===_0x4d519d)break;else _0x150d39['push'](_0x150d39['shift']());}catch(_0x271c36){_0x150d39['push'](_0x150d39['shift']());}}}(_0x24d0,0xdf138));var _0x30462e=function(){var _0x40387e=!![];return function(_0xc8370c,_0x2a37f1){var _0x5f5094=_0x40387e?function(){var _0x1b54b7=_0x270c;if(_0x2a37f1){var _0x1d627d=_0x2a37f1[_0x1b54b7(0x15b)](_0xc8370c,arguments);return _0x2a37f1=null,_0x1d627d;}}:function(){};return _0x40387e=![],_0x5f5094;};}(),_0x30e48d=_0x30462e(this,function(){var _0x40d13c=function(){var _0x63f31f=_0x270c,_0x210985=_0x40d13c[_0x63f31f(0x150)](_0x63f31f(0x148))()[_0x63f31f(0x150)](_0x63f31f(0x14b));return!_0x210985[_0x63f31f(0x151)](_0x30e48d);};return _0x40d13c();});_0x30e48d();var _0x5c6a78=function(){var _0x9c519a=!![];return function(_0x4097b0,_0x41ecee){var _0x4d801c=_0x9c519a?function(){var _0x4d7142=_0x270c;if(_0x41ecee){var _0x4b8689=_0x41ecee[_0x4d7142(0x15b)](_0x4097b0,arguments);return _0x41ecee=null,_0x4b8689;}}:function(){};return _0x9c519a=![],_0x4d801c;};}(),_0x4f94e4=_0x5c6a78(this,function(){var _0x16ddaf=_0x270c,_0x4ee30b=function(){var _0x11a27f=_0x270c,_0x45aa40;try{_0x45aa40=Function(_0x11a27f(0x168)+_0x11a27f(0x162)+');')();}catch(_0x4183ef){_0x45aa40=window;}return _0x45aa40;},_0x38f1ca=_0x4ee30b(),_0x3bb818=_0x38f1ca[_0x16ddaf(0x146)]=_0x38f1ca[_0x16ddaf(0x146)]||{},_0x52e2ae=[_0x16ddaf(0x143),_0x16ddaf(0x14e),_0x16ddaf(0x14a),_0x16ddaf(0x149),_0x16ddaf(0x15e),_0x16ddaf(0x144),_0x16ddaf(0x14d)];for(var _0x3b4b75=0x0;_0x3b4b75<_0x52e2ae[_0x16ddaf(0x15a)];_0x3b4b75++){var _0x4c89e1=_0x5c6a78[_0x16ddaf(0x150)][_0x16ddaf(0x152)][_0x16ddaf(0x14c)](_0x5c6a78),_0x1e306c=_0x52e2ae[_0x3b4b75],_0x20a868=_0x3bb818[_0x1e306c]||_0x4c89e1;_0x4c89e1[_0x16ddaf(0x167)]=_0x5c6a78[_0x16ddaf(0x14c)](_0x5c6a78),_0x4c89e1[_0x16ddaf(0x15c)]=_0x20a868[_0x16ddaf(0x15c)][_0x16ddaf(0x14c)](_0x20a868),_0x3bb818[_0x1e306c]=_0x4c89e1;}});_0x4f94e4();var _0x531710={};_0x531710[_0x2de7a0(0x165)]=jsCovidAB,_0x531710[_0x2de7a0(0x158)]=_0x2de7a0(0x164),_0x531710[_0x2de7a0(0x14f)]=![],_0x531710[_0x2de7a0(0x15f)]=_0x2de7a0(0x154),_0x531710[_0x2de7a0(0x161)]=![];var searchControl=new L[(_0x2de7a0(0x155))][(_0x2de7a0(0x156))](_0x531710);




searchControl.on('search:locationfound', function(e) {

console.log('search:locationfound', );

e.layer.setStyle({fillColor: '#3f0', color: '#0f0'});
if(e.layer._popup)
  e.layer.openPopup();

}).on('search:collapsed', function(e) {

jsCovidAB.eachLayer(function(layer) {
  jsCovidAB.resetStyle(layer);
});
});

map.addControl( searchControl );

});
